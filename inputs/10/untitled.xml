<Scene>
    <MaxRecursionDepth>6</MaxRecursionDepth>

    <BackgroundColor>0 0 0</BackgroundColor>

    <ShadowRayEpsilon>1e-3</ShadowRayEpsilon>

    <IntersectionTestEpsilon>1e-3</IntersectionTestEpsilon>

	<Camera id="1">
		<Position>0 1 -5</Position>
		<Gaze>0 0 1</Gaze>
		<Up>0 1 0</Up>
        <NearPlane>-1.5 1.5 -1.5 1.5</NearPlane>
        <NearDistance>1</NearDistance>
        <ImageResolution>600 600</ImageResolution>
        <NumSamples>16</NumSamples>
		<ImageName>skybox.png</ImageName>
	</Camera>

    <Lights>
        <!-- <AmbientLight>25 25 25</AmbientLight> -->
        <!--
        <PointLight id="1">
            <Position>0 2 0</Position>
            <Intensity>10000 10000 10000</Intensity>
        </PointLight>
        -->
        <!-- <AreaLight id="1">
            <Position>-5 5 2</Position>
            <EdgeVector1>3 0 0</EdgeVector1>
            <EdgeVector2>0 0 -3</EdgeVector2>
            <Intensity>10000 10000 10000</Intensity>
        </AreaLight> -->
    </Lights>

    <Materials>
        <Material id="1">
            <AmbientReflectance>1 1 1</AmbientReflectance>
            <DiffuseReflectance>1 1 1</DiffuseReflectance>
            <SpecularReflectance>0 0 0</SpecularReflectance>
            <PhongExponent>1</PhongExponent>
        </Material>
        <Material id="3">
            <AmbientReflectance>1 1 1</AmbientReflectance>
            <DiffuseReflectance>0.4 0.4 1</DiffuseReflectance>
            <SpecularReflectance>1 1 1</SpecularReflectance>
            <PhongExponent>100</PhongExponent>
        </Material>
        <Material id="4">
            <AmbientReflectance>0 0 0</AmbientReflectance>
            <DiffuseReflectance>0 0 0</DiffuseReflectance>
            <SpecularReflectance>0.3 0.3 0.3</SpecularReflectance>
            <Transparency>0.99 0.99 0.99</Transparency>
            <RefractionIndex>2.0</RefractionIndex>
        </Material>
        <Material id="5">
            <AmbientReflectance>1 1 1</AmbientReflectance>
            <DiffuseReflectance>0 0 0</DiffuseReflectance>
            <SpecularReflectance>0 0 0</SpecularReflectance>
            <MirrorReflectance>0.9 0.9 0.9</MirrorReflectance>
        </Material>
        <Material id="6">
            <LightSource>textures/uffizi_probe.hdr</LightSource>
        </Material>
    </Materials>

    <Textures>
        <!-- <Texture id="1">
            <ImageName>textures/sunny_sky.hdr</ImageName>
            <Interpolation>bilinear</Interpolation>
            <DecalMode>replace_all</DecalMode>
        </Texture> -->
        <Texture id="1">
            <!--<ImageName>textures/earthy_texture.jpg</ImageName>-->
            <ImageName>textures/sand.jpg</ImageName>
            <Interpolation>bilinear</Interpolation>
            <DecalMode>replace_kd</DecalMode>
            <Normalizer>255</Normalizer>
            <Appearance>repeat</Appearance>
        </Texture>
    </Textures>

    <Transformations>
        <Scaling id="1">40 1 40</Scaling>
        <Scaling id="2">2 1 1</Scaling>
        <Scaling id="3">1 3 1</Scaling>
        <Scaling id="4">1 1 5</Scaling>
        <Translation id="1">3 2 15</Translation>
        <Translation id="2">-20 -5 0</Translation>
        <Translation id="3">0 13 0</Translation>
        <Translation id="4">-20 5 0</Translation>
        <Translation id="5">-5 5 -10</Translation>
        <Translation id="6">0 0.5 0</Translation>
        <Translation id="7">-1 0.5 0</Translation>
        <Translation id="8">1 0.5 0</Translation>
        <Translation id="9">-0.5 0.4 0.9</Translation>
        <Translation id="10">0.5 0.4 0.9</Translation>
        <Translation id="11">0 0.35 -3</Translation>
        <Rotation id="1">45 0.0 0.0 1.0</Rotation>
        <Rotation id="2">0 0.0 1.0 0.0</Rotation>
        <Rotation id="3">0 1.0 0.0 0.0</Rotation>
    </Transformations>

    <VertexData>
        -1 0  1
         1 0  1
         1 0 -1
        -1 0 -1 
          0 0 0
    </VertexData>

    <TexCoordData>
        0 100
        100 100
        100 0
        0 0
    </TexCoordData>

    <Objects>
        <Mesh id="1">
            <Material>1</Material>
            <Texture>1</Texture>
            <Transformations>s1</Transformations>
            <Faces>
                3 1 2
                1 3 4
            </Faces>
        </Mesh>
        <Sphere id="1">
            <Material>6</Material>
            <Transformations>r2 r3</Transformations>
            <Center>5</Center>
            <Radius>30</Radius>
        </Sphere>
        <Sphere id="2">
            <Material>3</Material>
            <Transformations>t6</Transformations>
            <Center>5</Center>
            <Radius>0.5</Radius>
        </Sphere>
        <Sphere id="3">
            <Material>3</Material>
            <Transformations>t7</Transformations>
            <Center>5</Center>
            <Radius>0.5</Radius>
        </Sphere>
        <Sphere id="4">
            <Material>4</Material>
            <Transformations>t8</Transformations>
            <Center>5</Center>
            <Radius>0.5</Radius>
        </Sphere>
        <Sphere id="5">
            <Material>3</Material>
            <Transformations>t9</Transformations>
            <Center>5</Center>
            <Radius>0.4</Radius>
        </Sphere>
        <Sphere id="6">
            <Material>4</Material>
            <Transformations>t10</Transformations>
            <Center>5</Center>
            <Radius>0.4</Radius>
        </Sphere>
        <Sphere id="7">
            <Material>5</Material>
            <Transformations>t11</Transformations>
            <Center>5</Center>
            <Radius>0.5</Radius>
        </Sphere>
    </Objects>
</Scene>
